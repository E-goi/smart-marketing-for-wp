jQuery(document).ready(function(e){"use strict";e(document.getElementById("egoi4wp-admin")).find(".color").wpColorPicker(),e(".egoi-copy-code").on("click",i=>{var a,o;i.preventDefault(),a=e(i.target).parent().children("code").text(),(o=document.createElement("textarea")).value=a,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}),e(".e-goi-account-apikey--grp--form__input").on("input",function(){var i=e("#save_apikey");0!=i.length&&(i[0].classList.add("disabled"),i.unbind("click")),e(".icon-error").hide();var a=e(this).val();40==a.length?(e(".icon-load").show(),e(".icon-valid").hide(),e(".icon-error").hide(),e.ajax({url:egoi_config_ajax_object.ajax_url,type:"POST",data:{security:egoi_config_ajax_object.ajax_nonce,action:"egoi_change_api_key",egoi_key:a},success:function(a,o){"404"==o||a.data&&a.data.ERROR?(e(".icon-error").show(),e(".icon-valid").hide(),e(".icon-load").hide()):(e(".icon-valid").show(),e(".icon-error").hide(),e(".icon-load").hide(),0!=i.length&&(i[0].classList.remove("disabled"),i.bind("click",function(i){if(i.preventDefault(),e("#apikey").val()!=e("#old_apikey").val()){if(!confirm(e("#confirm_text").text()))return!1;var a={security:egoi_config_ajax_object_core.ajax_nonce,action:"efwp_apikey_changes"};e.post(egoi_config_ajax_object_core.ajax_url,a,function(i){"ok"==(i=JSON.parse(i)).result&&""!=e("#apikey").val()?e('form[name="egoi_apikey_form"]').submit():window.location.reload()})}else e('form[name="egoi_apikey_form"]').submit()})))},error:function(i){i&&(e(".icon-valid").hide(),e(".icon-error").show(),e(".icon-load").hide(),e("#api-save-text").show())}})):(e("#save_apikey").prop("disabled",!0),e("#valid").hide())}),e("#egoi_api_key_input").on("input",function(){var i=e("#egoi_4_wp_login");i.prop("disabled",!0);var a=e(this).val();40==a.length?(e(".icon-load").show(),e(".icon-valid").hide(),e(".icon-error").hide(),e.ajax({url:egoi_config_ajax_object.ajax_url,type:"POST",data:{security:egoi_config_ajax_object.ajax_nonce,action:"egoi_change_api_key",egoi_key:a},success:function(a,o){"404"==o||a.data&&a.data.ERROR?(e(".icon-error").show(),e(".icon-valid").hide(),e(".icon-load").hide()):(e(".icon-valid").show(),e(".icon-error").hide(),e(".icon-load").hide(),i.prop("disabled",!1))},error:function(i){i&&(e(".icon-valid").hide(),e(".icon-error").show(),e(".icon-load").hide(),e("#api-save-text").show())}})):(e("#egoi_4_wp_login").prop("disabled",!0),e("#valid").hide())}),e("#egoi_4_wp_login").on("click",function(i){i.preventDefault(),e(this).prop("disabled",!0),e('form[name="egoi_apikey_form"]').submit()}),e('form[name="egoi_apikey_form"]').submit(e=>{e.preventDefault();var i={security:egoi_config_ajax_object_core.ajax_nonce,action:"efwp_apikey_save",apikey:jQuery("#apikey").val()?jQuery("#apikey").val():jQuery("#egoi_api_key_input").val()};jQuery.post(egoi_config_ajax_object_core.ajax_url,i,function(e){if(!e.success){alert(e.data);return}e.data.redirect?window.location=e.data.redirect:window.location.reload()})}),e("#save_apikey").on("click",function(i){if(i.preventDefault(),e("#apikey").val()!=e("#old_apikey").val()){if(!confirm(e("#confirm_text").text()))return!1;var a={security:egoi_config_ajax_object_core.ajax_nonce,action:"efwp_apikey_changes"};e.post(egoi_config_ajax_object_core.ajax_url,a,function(i){"ok"==(i=JSON.parse(i)).result&&""!=e("#apikey").val()?e('form[name="egoi_apikey_form"]').submit():window.location.reload()})}else e('form[name="egoi_apikey_form"]').submit()}),e("#egoi_remove_data").on("click",function(){var i=e('input[name="egoi_data[remove]"]:checked').val();e("#load_data").show(),e.ajax({type:"POST",data:{security:egoi_config_ajax_object_core.ajax_nonce,action:"efwp_remove_data",rmdata:i},url:egoi_config_ajax_object_core.ajax_url,success:function(i,a){e("#remove_valid").show(),e("#load_data").hide(),e(".icon-error").hide()},error:function(i){i&&(e("#remove_valid").hide(),e(".icon-error").show())}})}),e(".button-primary--custom-add").on("click",function(){e("#e-goi-create-list").show(),e(this).hide()}),e(".cancel-toggle").on("click",function(){e("#e-goi-create-list").hide(),e(".button-primary--custom-add").show()}),e(".egoi_json_trigger").change(function(){e("#egoi_track_social").is(":checked")?e("#egoi_track_json").show():e("#egoi_track_json").hide()})});