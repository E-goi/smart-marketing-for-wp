(t=>{t(document).ready(function(){t(window).keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1}),t(document).on("click",".error",function(){t(this).removeClass("error")}),t(".tab .tab-item a").click(function(e){e.preventDefault(),t(".tab-item, .tab-content, .smsnf-tab-content").removeClass("active"),t("#"+t(this).attr("tab-target")).addClass("active"),t(this).closest("li").addClass("active")});var e,a=t(".shortcode.-copy");t.each(a,(e,a)=>{var i=t(a);if(new ClipboardJS(a),i.is("div")&&(i.click(()=>{i.attr("data-tooltip",i.attr("data-after"))}),i.mouseout(()=>{var t=setTimeout(function(){i.attr("data-tooltip",i.attr("data-before")),clearTimeout(t)},500)})),i.is("button")){var o=i.closest(".tooltip");i.click(()=>{o.attr("data-tooltip",o.attr("data-after"))}),i.mouseout(()=>{var t=setTimeout(function(){o.attr("data-tooltip",o.attr("data-before")),clearTimeout(t)},500)})}}),t("a[data-modal]").click(function(e){var a=t(this).attr("data-modal");t(`#${a}`).addClass("active")}),t('.modal a[href="#close"]').click(function(){t(this).closest(".modal").removeClass("active")});var i=t(".smsnf-notification");i.attr("lazy")||(i.fadeIn(),setTimeout(()=>{i.fadeOut()},5e3)),i.find(".close-btn").click(function(){i.fadeOut()}),t("#smsnf-help-btn").click(function(){t("#smsnf-help").addClass("-open")}),t("#smsnf-help .close-btn").click(function(){t("#smsnf-help").removeClass("-open")});var o=t("#list_to_subscribe"),n=t("#form_list"),l=t("#form_tag"),s=t("#new_tag_submit"),r=o.attr("data-egoi-list"),c=n.attr("data-egoi-form"),d=l.attr("data-egoi-tag");if(t(document).on("data-attribute-changed",function(){""!=l.attr("data-egoi-tag")?l.val(l.attr("data-egoi-tag")):l.val(null)}),o.length&&t.post(url_egoi_script.ajaxurl,{action:"egoi_get_lists"},function(e){var a=JSON.parse(e);t.each(a,function(t,e){void 0!==e.list_id&&o.append(`<option value="${e.list_id}">${e.public_name}</option>`)}),""!=r&&o.val(r),o.prop("disabled",!1)}),o.length&&n.length){function f(e,a){""!=e&&(t("#form_list_group").slideDown(),t("#empty-forms").slideUp(),t.post(url_egoi_script.ajaxurl,{action:"efwp_get_form_from_list",listID:e}).done(function(e){var i=JSON.parse(e);n.find("option").not(":first").remove(),"FORMS_NOT_FOUND"==i.ERROR?t("#empty-forms").slideDown():t.each(i,function(t,e){void 0!==e.id&&n.append(`<option value="${e.title}">${e.title}</option>`)}),n.val(a),n.prop("disabled",!1)}).fail(function(t){console.log("N\xe3o foi possivel obter os formul\xe1rios")}))}f(r,c),o.change(()=>{n.prop("disabled",!0),f(t(this).find("option:checked").val(),"")})}t.post(url_egoi_script.ajaxurl,{action:"egoi_get_tags"},function(e){var a=JSON.parse(e);t.each(a,function(t,e){l.append(`<option value="${e.tag_id}">${e.name}</option>`)}),l.prop("disabled",!1),""!=d&&l.val(d)});var p=t("button","#sf-btns"),m=t("#sf-btn-name"),u=t("#sf-btn-email"),v=t("#sf-btn-phone"),b=t("#sf-btn-submit"),h=t("#sf-code"),g={name:`[e_name]
<p>
  <label for="egoi_name">${m.attr("data-lable")}: </label>
  <input type="text" name="egoi_name" id="egoi_name" />
</p>
[/e_name]
`,email:`[e_email]
<p>
  <label for="egoi_email">${u.attr("data-lable")}: </label>
  <input type="email" name="egoi_email" id="egoi_email" />
</p>
[/e_email]
`,phone:`[e_mobile]
<p>
  <label for="egoi_mobile">${v.attr("data-lable")}: </label>
  <select name="egoi_country_code" id="egoi_country_code" data-selected=""></select><input type="text" name="egoi_mobile" id="egoi_mobile" />
</p>
[/e_mobile]
`,submit:`[e_submit]
<p>
  <button type="submit" id="egoi_submit_button">${b.attr("data-lable")}</button>
</p>
[/e_submit]
`};function k(t){var e=h.val();e+=t,h.val(e)}function C(t){var e=h.val(),a=`[e_${t}]`,i=`[/e_${t}]`,o=e.indexOf(a),n=e.indexOf(i)+i.length+1;h.val(e.replace(e.substring(o,n),""))}p.click(function(){t(this).toggleClass("active")}),m.click(function(e){t(this).hasClass("active")?k(g.name):C("name")}),u.click(function(e){t(this).hasClass("active")?k(g.email):C("email")}),v.click(function(e){t(this).hasClass("active")?k(g.phone.replace('data-selected=""','data-selected="'+defaultPrefix+'"')):C("mobile")}),b.click(function(e){t(this).hasClass("active")?k(g.submit):C("submit")}),t("#smsnf-simple-forms-form").submit(function(e){var a,i=t(this);""==(a=i.find("#list_to_subscribe")).find("option:selected").val()&&a.addClass("error"),""==(a=i.find("#form_name")).val().trim()&&a.addClass("error"),""==(a=i.find("#sf-code")).val().trim()&&a.addClass("error");var o=a.val();o.includes("[e_submit]")&&o.includes("[/e_submit]")||b.addClass("error"),i.find(".error").length&&e.preventDefault()});var $=t("#adv-forms-select-type"),w=t("input[name=type]",$),y=w.filter(":checked").val(),x=t("#smsnf-confirm-modal"),D=t("#confirm-btn",x);w.click(function(){if(e=t(this).val(),"iframe"==y&&("popup"==e||"html"==e)||"iframe"==e&&("popup"==y||"html"==y))return x.addClass("active"),!1;t(this).closest("form").submit()}),D.click(function(){t("input[name='type'][value='"+e+"']").prop("checked",!0),t(this).prop("disabled",!0),$.submit()}),t("#smsnf-adv-forms-form").submit(function(e){var a,i=t(this);""==(a=i.find("#form_name")).val().trim()&&a.addClass("error"),(a=i.find("#form_code")).length&&""==a.val().trim()&&a.addClass("error"),(a=i.find("#list_to_subscribe")).length&&""==a.find("option:selected").val()&&a.addClass("error"),(a=i.find("#form_list")).length&&""==a.find("option:selected").val()&&a.addClass("error"),i.find(".error").length&&e.preventDefault()}),t("#smsnf-subscriber-bar, #smsnf-widget-options").submit(function(e){var a,i=t(this);""==(a=i.find("#list_to_subscribe")).find("option:selected").val()&&a.addClass("error"),i.find(".error").length&&e.preventDefault()});var _=t("#form_border"),O=t("#form_border_color"),j=t("#form_width"),R=t("#form_height"),N=t("#form-preview"),E=t("#preview .width span"),F=t("#preview .height span");function I(){var t=_.val(),e=j.val(),a=R.val();N.css({"border-width":""==t?0:t,"border-color":O.val(),width:e<400?e:"400px",height:a<325?a:"325px"}),E.text(e+"px"),F.text(a+"px")}I(),_.on("keyup change",I),O.on("keyup change",I),j.on("keyup",I),R.on("keyup change",I),t(".smsnf-input-group input.color").wpColorPicker({change:I}),t(".colorpicker-wrapper").each(function(e,a){var i,o=t(a),n=o.find(".view"),l=o.find("input");i=t("#smsnf-adv-forms-custom").length?(e,a,i)=>{t(n).css("background-color","#"+a),l.val("#"+a),I()}:(e,a,i)=>{t(n).css("background-color","#"+a),l.val("#"+a)},o.ColorPicker({color:l.val(),onChange:i,onSubmit:i})}),s.on("click",function(e){e.preventDefault();var a,i,o=t("#new_tag_name"),n=t("#loading_add_tag");if(a=[o],i=!0,a.forEach(function(t,e){""==t.val()&&(i=!1,t.addClass("error"),setTimeout(function(){t.removeClass("error")},1e3))}),i){n.show(),t(this).prop("disabled",!0);var s={action:"egoi_add_tag",name:o.val()};t.post(url_egoi_script.ajaxurl,s,function(e){var a=JSON.parse(e);l.append(`<option value="${a.tag_id}">${a.name}</option>`),t(this).prop("disabled",!1),l.val(a.tag_id),t("#create-new-tag").hide()})}})})})(jQuery);