jQuery(document).ready(function(e){"use strict";new Clipboard("#e-goi_shortcode");var t=e("#session_form"),o=new URL(window.location.href),i=o.searchParams.get("page");if("undefined"!=typeof i&&"egoi-4-wp-form"==i){var n={action:"egoi_get_lists"},a=e("#e-goi-list-frm"),r=e("#e-goi-list-bar"),s=[];e(".loading_lists").addClass("spin").show();var c=e("#e-goi-lists_ct_forms"),d=e("#e-goi-lists_ct_bar");e.post(url_egoi_script.ajaxurl,n,function(t){e(".loading_lists").removeClass("spin").hide(),s=JSON.parse(t),s.ERROR?(e(".e-goi-lists_not_found").show(),a.hide(),r.hide()):(a.show(),r.show(),e(".e-goi-lists_not_found").hide(),e.each(s,function(t,o){"undefined"!=typeof o.listnum&&(a.append(e("<option />").val(o.listnum).text(o.title)),r.append(e("<option />").val(o.listnum).text(o.title)),c.text()===o.listnum&&a.val(o.listnum),d.text()===o.listnum&&r.val(o.listnum))}))})}e("#rcv_e-goi_forms").text(e("#ct_e-goi_forms").text()),e("#egoi4wp-form-hide").hide(),e("#wp-form_content-editor-tools").append("<b>Editor</b>");var l=e(document.getElementsByClassName("wrap"));l.find(".color").wpColorPicker();var p=e(document.getElementById("tab-content")),f=e(document.getElementById("tab-appearance"));f.hide(),e("#nav-tab-content").click(function(){p.show(),f.hide(),e("#nav-tab-content").addClass("nav-tab-active"),e("#nav-tab-appearance").removeClass("nav-tab-active")}),e("#nav-tab-appearance").click(function(){f.show(),p.hide(),e("#nav-tab-appearance").addClass("nav-tab-active"),e("#nav-tab-content").removeClass("nav-tab-active")}),e("#close_egoi").click(function(){e("#TB_closeWindowButton").trigger("click")}),e("#form_choice").on("change",function(){t.length?e(".cd-popup-trigger-change").trigger("click"):(e("#load_frm_change").addClass("spin").show(),document.getElementById("e-goi-form-options").submit())}),e(".cd-popup-trigger-del").click(function(){var t=e(this).data("id-form"),o=e(this).data("type-form");event.preventDefault(),e(".cd-popup-del-form").filter(function(){var i=!1;return e(this).data("id-form")===t&&e(this).data("type-form")===o&&(i=!0),i}).addClass("is-visible")}),e(".cd-popup-trigger-change").on("click",function(t){t.preventDefault(),e(".cd-popup-change-form").addClass("is-visible")}),e(".cd-popup").on("click",function(t){(e(t.target).is(".cd-popup-close-btn")||e(t.target).is(".cd-popup"))&&(t.preventDefault(),e(this).removeClass("is-visible"))}),e("#close_frm_change").on("click",function(){e("#form_choice").val(e("#type_frm_saved").val())}),e("#change_form_req").click(function(){document.getElementById("e-goi-form-options").submit()}),e("#get_type_form").click(function(){e("#form_type").trigger("click")}),e("#e-goi-list-frm").on("change",function(){var t=e(this).val(),o=e("#formid_egoi"),i={action:"get_form_from_list",listID:t};e("#load_forms").addClass("spin").show();var n="";e.post(url_egoi_script.ajaxurl,i,function(t){return e("#load_forms").removeClass("spin").hide(),n=JSON.parse(t),n.ERROR?(e("#egoi_form_wp").hide(),e("#empty_forms").show(),!1):(e("#egoi_form_wp").show(),e("#empty_forms").hide(),o.show(),e.each(n,function(e,t){"undefined"!=typeof t.id&&o.append('<option value="'+t.id+" - "+t.url+'">'+t.title+"</option>")}),e("#formid_egoi").trigger("change"),void 0)})}),e("#formid_egoi").on("change",function(){var t=document.getElementById("formid_egoi"),o=t.options[t.selectedIndex].value,i=o.split(" - ");""!=o&&e.ajax({url:"//"+window.location.host+"/wp-content/plugins/smart-marketing-for-wp/admin/partials/custom/egoi-for-wp-form_egoi.php",type:"POST",data:{id:i[0],url:i[1]},success:function(t,o){if(t){e("#egoi_form_inter").html(t),e("#form_egoint").trigger("click");var i=e("#TB_window");e("#TB_ajaxContent").css("width","700px"),i.css("width","730px")}},error:function(t){e("#valid").hide(),e("#error").show()}})});var m=o.searchParams.get("type");"form"!=m?e("#egoi4wp-form-hide").show():e("#egoi4wp-form-hide").hide()});