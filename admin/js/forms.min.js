jQuery(document).ready(function(e){"use strict";new Clipboard("#e-goi_shortcode");var o=e("#session_form"),i={action:"egoi_get_lists"},t=e("#e-goi-list-frm"),n=e("#e-goi-list-bar"),a=[];e(".loading_lists").addClass("spin").show();var s=e("#e-goi-lists_ct_forms"),r=e("#e-goi-lists_ct_bar");e.post(url_egoi_script.ajaxurl,i,function(o){e(".loading_lists").removeClass("spin").hide(),(a=JSON.parse(o)).ERROR?(e(".e-goi-lists_not_found").show(),t.hide(),n.hide()):(t.show(),n.show(),e(".e-goi-lists_not_found").hide(),e.each(a,function(o,i){void 0!==i.listnum&&(t.append(e("<option />").val(i.listnum).text(i.title)),n.append(e("<option />").val(i.listnum).text(i.title)),s.text()===i.listnum&&t.val(i.listnum),r.text()===i.listnum&&n.val(i.listnum))}))}),e("#rcv_e-goi_forms").text(e("#ct_e-goi_forms").text()),e("#egoi4wp-form-hide").hide(),e("#wp-form_content-editor-tools").append("<b>Editor</b>"),e(document.getElementById("egoi4wp-form")).find(".color").wpColorPicker();var c=e(document.getElementById("tab-content")),l=e(document.getElementById("tab-appearance"));l.hide(),e("#nav-tab-content").click(function(){c.show(),l.hide(),e("#nav-tab-content").addClass("nav-tab-active"),e("#nav-tab-appearance").removeClass("nav-tab-active")}),e("#nav-tab-appearance").click(function(){l.show(),c.hide(),e("#nav-tab-appearance").addClass("nav-tab-active"),e("#nav-tab-content").removeClass("nav-tab-active")}),e("#close_egoi").click(function(){e("#TB_closeWindowButton").trigger("click")}),e("#form_choice").change(function(){o.length?e(".cd-popup-trigger-change").trigger("click"):(e("#load_frm_change").addClass("spin").show(),document.getElementById("e-goi-form-options").submit())}),e(".cd-popup-trigger-del").on("click",function(o){o.preventDefault(),e(".cd-popup-del-form").addClass("is-visible")}),e(".cd-popup-trigger-change").on("click",function(o){o.preventDefault(),e(".cd-popup-change-form").addClass("is-visible")}),e(".cd-popup").on("click",function(o){(e(o.target).is(".cd-popup-close-btn")||e(o.target).is(".cd-popup"))&&(o.preventDefault(),e(this).removeClass("is-visible"))}),e(document).keyup(function(o){"27"==o.which&&e(".cd-popup").removeClass("is-visible")}),e("#change_form_req").click(function(){document.getElementById("e-goi-form-options").submit()}),e("#get_type_form").click(function(){e("#form_type").trigger("click")}),e("#e-goi-list-frm").on("change",function(){var o=e(this).val(),i=e("#formid_egoi"),t={action:"get_form_from_list",listID:o};e("#load_forms").addClass("spin").show();var n="";e.post(url_egoi_script.ajaxurl,t,function(o){if(e("#load_forms").removeClass("spin").hide(),(n=JSON.parse(o)).ERROR)return e("#egoi_form_wp").hide(),e("#empty_forms").show(),!1;e("#egoi_form_wp").show(),e("#empty_forms").hide(),i.show(),e.each(n,function(e,o){void 0!==o.id&&i.append('<option value="'+o.id+" - "+o.url+'">'+o.title+"</option>")}),e("#formid_egoi").trigger("change")})}),e("#formid_egoi").on("change",function(){var o=document.getElementById("formid_egoi"),i=o.options[o.selectedIndex].value,t=i.split(" - ");""!=i&&e.ajax({url:"//"+window.location.host+"/wp-content/plugins/smart-marketing-for-wp/admin/partials/custom/egoi-for-wp-form_egoi.php",type:"POST",data:{id:t[0],url:t[1]},success:function(o,i){if(o){e("#egoi_form_inter").html(o),e("#form_egoint").trigger("click");var t=e("#TB_window");e("#TB_ajaxContent").css("width","700px"),t.css("width","730px")}},error:function(o){e("#valid").hide(),e("#error").show()}})});var d=window.location.href;"form"!=new URL(d).searchParams.get("type")?e("#egoi4wp-form-hide").show():e("#egoi4wp-form-hide").hide()});