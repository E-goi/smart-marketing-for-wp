jQuery.fn.rotate=function(e){return jQuery(this).animate({deg:e},{duration:500,step:function(e){jQuery(this).css({transform:"rotate("+e+"deg)"})}}),jQuery(this)},jQuery(document).ready(function(){jQuery(".js-example-basic-multiple").select2(),jQuery(".cats_tags_titles").hide(),jQuery(".post_cats_tags").hide(),jQuery(".product_cats_tags").hide();var e=jQuery("input[type=radio][name=type]:checked").val();function a(){var e=jQuery("#egoi_add_campaign_webpush"),a=jQuery("#campaign_title_webpush"),i=jQuery("#egoi_create_campaign_webpush");a.val(""),e.val(0),e.trigger("change"),e.attr("disabled",!1),a.attr("disabled",!1),i.attr("disabled",!1),i.show()}function i(){var e=jQuery("#egoi_add_campaign"),a=jQuery("#campaign_subject"),i=jQuery("#campaign_snippet"),t=jQuery(".number-spinner button").closest(".number-spinner").find("input"),n=jQuery("#campaign_title");e.trigger("change"),a.val(""),i.val(""),t.val(5),n.val("")}function t(e=!0){var a=jQuery("#egoi_add_campaign"),i=jQuery("#campaign_subject"),t=jQuery("#campaign_snippet"),n=jQuery(".number-spinner button").closest(".number-spinner").find("span").find("button"),s=jQuery(".number-spinner button").closest(".number-spinner").find("input"),o=jQuery("#egoi_list"),c=jQuery("#egoi_senders"),l=jQuery("#campaign_title"),r=jQuery("#egoi_create_campaign"),p=jQuery("#egoi_create_campaign_loading");e?(r.show(),p.hide()):p.show(),r.attr("disabled",!e),a.attr("disabled",!e),i.attr("disabled",!e),t.attr("disabled",!e),n.attr("disabled",!e),s.attr("disabled",!e),o.attr("disabled",!e),c.attr("disabled",!e),l.attr("disabled",!e)}function n(e){var a=!0;return e.forEach(function(e){var i;(""==e.val()||0==e.val())&&(a=!1,(i=e).addClass("invalidjQuery"),setTimeout(function(){i.removeClass("invalidjQuery")},2e3))}),a}"posts"==e?(jQuery(".post_cats_tags").show(),jQuery(".cats_tags_titles").show()):"products"==e&&(jQuery(".product_cats_tags").show(),jQuery(".cats_tags_titles").show()),jQuery("input[type=radio][name=type]").on("change",function(e){jQuery(".cats_tags_titles").show(),"posts"==this.value?(jQuery(".post_cats_tags").show(),jQuery(".product_cats_tags").hide()):"products"==this.value&&(jQuery(".post_cats_tags").hide(),jQuery(".product_cats_tags").show())}),jQuery("#egoi_toggle_create_campaign").on("click",function(){var e=jQuery("#egoi_create_campaign"),a=jQuery("#egoi_campaign_arrow"),i=jQuery("#egoi_campaign_on_off");e.is(":visible")?(e.hide(500),a.rotate(0),i.removeClass("fa-toggle-on"),i.addClass("fa-toggle-off")):(e.show(500),a.rotate(180),i.removeClass("fa-toggle-off"),i.addClass("fa-toggle-on"))}),jQuery("#egoi_add_campaign").change(function(){var e,a,i,t,n=jQuery(".egoi_create_campaign_table");0==this.value?n.hide(200):(e=jQuery("#egoi_list"),jQuery("#egoi_list option[value!='0']").remove(),jQuery("#egoi_list_loading").show(),a={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_get_lists"},jQuery.post(egoi_config_ajax_object.ajax_url,a,function(a){a=JSON.parse(a),jQuery.each(a,function(a,i){if(void 0===i.listnum)return!0;e.append(jQuery("<option />").val(i.listnum).text(s(i.title)))}),jQuery("#egoi_list_loading").hide(),void 0!==a.default&&e.val(a.default)}),i=jQuery("#egoi_senders"),jQuery("#egoi_senders option[value!='0']").remove(),jQuery("#egoi_senders_loading").show(),t={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_get_email_senders"},jQuery.post(egoi_config_ajax_object.ajax_url,t,function(e){if(jQuery("#egoi_senders_loading").hide(),void 0!==e.error){i.append(jQuery("<option />").val(0).text(e.error));return}jQuery.each(e.data,function(){i.append(jQuery("<option />").val(this.sender_id).text(this.email))})}),n.show(200))}),jQuery("#egoi_add_campaign_webpush").change(function(){var e=jQuery(".egoi_create_campaign_webpush_table");0==this.value?e.hide(200):e.show(200)}),jQuery(".number-spinner button").on("click",function(){var e=jQuery(this),a=e.closest(".number-spinner").find("input").val().trim();if("up"==e.attr("data-dir")){if(parseInt(a)>=10)return;a=parseInt(a)+1}else a=a>1?parseInt(a)-1:1;e.closest(".number-spinner").find("input").val(a)}),jQuery("#egoi_create_campaign_webpush").on("click",function(){var e=jQuery("#egoi_add_campaign_webpush"),i=jQuery("#campaign_title_webpush"),t=jQuery("#egoi_create_campaign_webpush"),s=jQuery("#egoi_create_campaign_webpush_loading");if(n([i])){e.attr("disabled",!0),i.attr("disabled",!0),t.attr("disabled",!0),s.show();var o={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_rss_campaign_webpush",feed:e.val(),title:i.val()};jQuery.post(egoi_config_ajax_object.ajax_url,o,function(e){if(s.hide(),void 0!==(e=JSON.parse(e)).ERROR)return a(),alert(e.ERROR),!1;if(void 0===e.campaign_hash)return a(),console.log(e),alert("error"),!1;t.hide(200),jQuery("#campaign_hash_deploy_webpush").val(e.campaign_hash),jQuery("#campaign_list_id_deploy_webpush").val(e.list_id);var i=jQuery("#egoi_edit_campaign_webpush"),n=jQuery("#egoi_send_campaign_webpush");i.show(200),n.show(200)})}}),jQuery("#egoi_create_campaign").on("click",function(){var e=jQuery("#egoi_add_campaign"),a=jQuery("#campaign_subject"),i=jQuery("#campaign_snippet"),s=jQuery(".number-spinner button").closest(".number-spinner").find("input").val().trim(),o=jQuery("#egoi_list"),c=jQuery("#egoi_senders"),l=jQuery("#campaign_title"),r=jQuery("#egoi_create_campaign"),p=jQuery("#egoi_create_campaign_loading");if(n([a,i,o,c,l])){t(!1);var d={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_rss_campaign",list:o.val(),sender:c.val(),feed:e.val(),subject:a.val(),snippet:i.val(),items:s,title:l.val()};jQuery.post(egoi_config_ajax_object.ajax_url,d,function(e){if(p.hide(),void 0===(e=JSON.parse(e)).campaign_hash)return console.log("error"),!1;r.hide(),jQuery("#campaign_hash_deploy").val(e.campaign_hash),jQuery("#campaign_list_id_deploy").val(o.val());var a=jQuery("#egoi_edit_campaign"),i=jQuery("#egoi_send_campaign");a.show(200),i.show(200)})}}),jQuery("#egoi_edit_campaign").on("click",function(){var e=window.open("https://login.egoiapp.com/login?from=%2F%3Faction%3Dui#/messages/email/rss/wizard/"+jQuery("#campaign_list_id_deploy").val()+"/"+jQuery("#campaign_hash_deploy").val()+"/edit","_blank");if(e){var a=jQuery("#egoi_edit_campaign"),n=jQuery("#egoi_send_campaign");a.hide(200),n.hide(200),t(!0),i(),e.focus()}else alert("Please allow popups for this website")}),jQuery("#egoi_edit_campaign_webpush").on("click",function(){var e=window.open("https://login.egoiapp.com/login?from=%2F%3Faction%3Dui#/messages/webpush/rss/wizard/"+jQuery("#campaign_list_id_deploy_webpush").val()+"/"+jQuery("#campaign_hash_deploy_webpush").val()+"/edit","_blank");if(e){var i=jQuery("#egoi_edit_campaign_webpush"),t=jQuery("#egoi_send_campaign_webpush");i.hide(200),t.hide(200),a(),e.focus()}else alert("Please allow popups for this website")}),jQuery("#egoi_send_campaign").on("click",function(){jQuery("#egoi_send_campaign_loading").show();var e={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_deploy_rss",campaing_hash:jQuery("#campaign_hash_deploy").val()};jQuery.post(egoi_config_ajax_object.ajax_url,e,function(e){if(void 0!==(e=JSON.parse(e)).error)return t(!0),i(),alert(e.error),!1;jQuery("#egoi_send_campaign_loading").hide();var a=jQuery("#egoi_edit_campaign"),n=jQuery("#egoi_send_campaign");a.hide(200),n.hide(200),jQuery("#success_email").show(300),setTimeout(function(){jQuery("#success_email").hide(300),t(!0),i()},2e3)})}),jQuery("#egoi_send_campaign_webpush").on("click",function(){jQuery("#egoi_send_campaign_webpush_loading").show();var e={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_deploy_rss_webpush",campaing_hash:jQuery("#campaign_hash_deploy_webpush").val()};jQuery.post(egoi_config_ajax_object.ajax_url,e,function(e){jQuery("#egoi_send_campaign_webpush_loading").hide();var i=jQuery("#egoi_edit_campaign_webpush"),t=jQuery("#egoi_send_campaign_webpush");if(i.hide(200),t.hide(200),void 0!==e.error)return a(),alert(e.error),!1;jQuery("#success_webpush").show(300),setTimeout(function(){jQuery("#success_webpush").hide(300),a()},2e3)})}),jQuery(".nav-tab-addon").on("click",function(){var e,a;e=this,jQuery(".nav-tab-addon").each(function(){jQuery(this).attr("class","nav-tab nav-tab-addon")}),jQuery(e).attr("class","nav-tab nav-tab-addon nav-tab-active"),a="#"+jQuery(".nav-tab-active").attr("id").substring(4),jQuery(".wrap-addon").each(function(){jQuery(this).hide()}),jQuery(a).show()});var s=function(e){var a=document.createElement("textarea");return a.innerHTML=e,a.value}}),jQuery(".js-example-basic-multiple").on("select2:select",function(e){var a=e.params.data.element.id;if(a.indexOf("include")>=0)var i=a.replace("include","exclude");else var i=a.replace("exclude","include");jQuery("#"+i).prop("disabled",!0),jQuery(".js-example-basic-multiple").select2("destroy"),jQuery(".js-example-basic-multiple").select2()}),jQuery(".js-example-basic-multiple").on("select2:unselect",function(e){var a=e.params.data.element.id;if(a.indexOf("include")>=0)var i=a.replace("include","exclude");else var i=a.replace("exclude","include");jQuery("#"+i).prop("disabled",!1),setTimeout(function(){jQuery(".js-example-basic-multiple").select2("destroy"),jQuery(".js-example-basic-multiple").select2()})}),jQuery(".copy_url").click(function(){var e=jQuery(this).attr("data-rss-feed");if(document.getElementById(e).select(),document.execCommand("copy"),e.indexOf("url")>=0){var a=jQuery("#copy_text").text(),i=jQuery("#copied_text").text();jQuery(".copy_url").each(function(){jQuery(this).html(a).attr("style","width: 90px;")}),jQuery(this).html(i).css("color","#1BDB49")}else e.indexOf("input")>=0&&jQuery(this).html('<i class="fas fa-check"></i>').css("color","#1BDB49")});