jQuery.fn.rotate=function(degrees){return jQuery(this).animate({deg:degrees},{duration:500,step:function(now){jQuery(this).css({transform:"rotate("+now+"deg)"})}}),jQuery(this)},jQuery(document).ready((function($){$(".cd-popup-trigger-del").on("click",(function(e){e.preventDefault();var idForm=$(this).data("id-form"),data=($(this).data("type-form"),{security:egoi_config_ajax_object_rss.ajax_nonce,action:"egoi_remove_rss",rssId:idForm});$.post(egoi_config_ajax_object_rss.ajax_url,data,(function(response){location.reload()}))}))})),jQuery(document).ready((function(){jQuery(".js-example-basic-multiple").select2(),jQuery(".cats_tags_titles").hide(),jQuery(".post_cats_tags").hide(),jQuery(".product_cats_tags").hide();var type=jQuery("input[type=radio][name=type]:checked").val();function clearWebpushForm(){var feed=jQuery("#egoi_add_campaign_webpush"),title=jQuery("#campaign_title_webpush"),button=jQuery("#egoi_create_campaign_webpush");title.val(""),feed.val(0),feed.trigger("change"),feed.attr("disabled",!1),title.attr("disabled",!1),button.attr("disabled",!1),button.show()}function clearForm(){var feed=jQuery("#egoi_add_campaign"),subject=jQuery("#campaign_subject"),snippet=jQuery("#campaign_snippet"),itemsInput=jQuery(".number-spinner button").closest(".number-spinner").find("input"),title=jQuery("#campaign_title");feed.trigger("change"),subject.val(""),snippet.val(""),itemsInput.val(5),title.val("")}function onOffForm(on=!0){var feed=jQuery("#egoi_add_campaign"),subject=jQuery("#campaign_subject"),snippet=jQuery("#campaign_snippet"),itemsButton=jQuery(".number-spinner button").closest(".number-spinner").find("span").find("button"),itemsInput=jQuery(".number-spinner button").closest(".number-spinner").find("input"),list=jQuery("#egoi_list"),sender=jQuery("#egoi_senders"),title=jQuery("#campaign_title"),button=jQuery("#egoi_create_campaign"),loading=jQuery("#egoi_create_campaign_loading");on?(button.show(),loading.hide()):loading.show(),button.attr("disabled",!on),feed.attr("disabled",!on),subject.attr("disabled",!on),snippet.attr("disabled",!on),itemsButton.attr("disabled",!on),itemsInput.attr("disabled",!on),list.attr("disabled",!on),sender.attr("disabled",!on),title.attr("disabled",!on)}function valid(obj){var flag=!0;return obj.forEach((function(element){var elm;""!=element.val()&&0!=element.val()||(flag=!1,(elm=element).addClass("invalidjQuery"),setTimeout((function(){elm.removeClass("invalidjQuery")}),2e3))})),flag}"posts"==type?(jQuery(".post_cats_tags").show(),jQuery(".cats_tags_titles").show()):"products"==type&&(jQuery(".product_cats_tags").show(),jQuery(".cats_tags_titles").show()),jQuery("input[type=radio][name=type]").on("change",(function(e){jQuery(".cats_tags_titles").show(),"posts"==this.value?(jQuery(".post_cats_tags").show(),jQuery(".product_cats_tags").hide()):"products"==this.value&&(jQuery(".post_cats_tags").hide(),jQuery(".product_cats_tags").show())})),jQuery("#egoi_toggle_create_campaign").on("click",(function(){var table=jQuery("#egoi_create_campaign"),arrow=jQuery("#egoi_campaign_arrow"),icon=jQuery("#egoi_campaign_on_off");table.is(":visible")?(table.hide(500),arrow.rotate(0),icon.removeClass("fa-toggle-on"),icon.addClass("fa-toggle-off")):(table.show(500),arrow.rotate(180),icon.removeClass("fa-toggle-off"),icon.addClass("fa-toggle-on"))})),jQuery("#egoi_add_campaign").change((function(){var form=jQuery(".egoi_create_campaign_table");0==this.value?form.hide(200):(!function(){var list_place=jQuery("#egoi_list");jQuery("#egoi_list option[value!='0']").remove(),jQuery("#egoi_list_loading").show();var obj={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_get_lists"};jQuery.post(egoi_config_ajax_object.ajax_url,obj,(function(response){response=JSON.parse(response),jQuery.each(response,(function(index,value){if(void 0===value.list_id)return!0;list_place.append(jQuery("<option />").val(value.list_id).text(decodeHTML(value.public_name)))})),jQuery("#egoi_list_loading").hide(),void 0!==response.default&&list_place.val(response.default)}))}(),function(){var sender_place=jQuery("#egoi_senders");jQuery("#egoi_senders option[value!='0']").remove(),jQuery("#egoi_senders_loading").show();var obj={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_get_email_senders"};jQuery.post(egoi_config_ajax_object.ajax_url,obj,(function(response){jQuery("#egoi_senders_loading").hide(),void 0===response.error?jQuery.each(response.data,(function(){sender_place.append(jQuery("<option />").val(this.sender_id).text(this.email))})):sender_place.append(jQuery("<option />").val(0).text(response.error))}))}(),form.show(200))})),jQuery("#egoi_add_campaign_webpush").change((function(){var form=jQuery(".egoi_create_campaign_webpush_table");0==this.value?form.hide(200):form.show(200)})),jQuery(".number-spinner button").on("click",(function(){var btn=jQuery(this),oldValue=btn.closest(".number-spinner").find("input").val().trim();if("up"==btn.attr("data-dir")){if(parseInt(oldValue)>=10)return;oldValue=parseInt(oldValue)+1}else oldValue=oldValue>1?parseInt(oldValue)-1:1;btn.closest(".number-spinner").find("input").val(oldValue)})),jQuery("#egoi_create_campaign_webpush").on("click",(function(){var feed=jQuery("#egoi_add_campaign_webpush"),title=jQuery("#campaign_title_webpush"),button=jQuery("#egoi_create_campaign_webpush"),loading=jQuery("#egoi_create_campaign_webpush_loading");if(valid([title])){feed.attr("disabled",!0),title.attr("disabled",!0),button.attr("disabled",!0),loading.show();var campaign={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_rss_campaign_webpush",feed:feed.val(),title:title.val()};jQuery.post(egoi_config_ajax_object.ajax_url,campaign,(function(response){if(loading.hide(),void 0!==(response=JSON.parse(response)).ERROR)return clearWebpushForm(),alert(response.ERROR),!1;if(void 0===response.campaign_hash)return clearWebpushForm(),console.log(response),alert("error"),!1;button.hide(200),jQuery("#campaign_hash_deploy_webpush").val(response.campaign_hash),jQuery("#campaign_list_id_deploy_webpush").val(response.list_id);var edit=jQuery("#egoi_edit_campaign_webpush"),send=jQuery("#egoi_send_campaign_webpush");edit.show(200),send.show(200)}))}})),jQuery("#egoi_create_campaign").on("click",(function(){var feed=jQuery("#egoi_add_campaign"),subject=jQuery("#campaign_subject"),snippet=jQuery("#campaign_snippet"),items=jQuery(".number-spinner button").closest(".number-spinner").find("input").val().trim(),list=jQuery("#egoi_list"),sender=jQuery("#egoi_senders"),title=jQuery("#campaign_title"),button=jQuery("#egoi_create_campaign"),loading=jQuery("#egoi_create_campaign_loading");if(valid([subject,snippet,list,sender,title])){onOffForm(!1);var campaign={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_rss_campaign",list:list.val(),sender:sender.val(),feed:feed.val(),subject:subject.val(),snippet:snippet.val(),items:items,title:title.val()};jQuery.post(egoi_config_ajax_object.ajax_url,campaign,(function(response){if(loading.hide(),void 0===response.data.campaign_hash)return console.log("error"),!1;button.hide(),jQuery("#campaign_hash_deploy").val(response.data.campaign_hash),jQuery("#campaign_list_id_deploy").val(list.val());var edit=jQuery("#egoi_edit_campaign"),send=jQuery("#egoi_send_campaign");edit.show(200),send.show(200)}))}})),jQuery("#egoi_edit_campaign").on("click",(function(){var win=window.open("https://login.egoiapp.com/login?from=%2F%3Faction%3Dui#/messages/email/rss/wizard/"+jQuery("#campaign_list_id_deploy").val()+"/"+jQuery("#campaign_hash_deploy").val()+"/edit","_blank");if(win){var edit=jQuery("#egoi_edit_campaign"),send=jQuery("#egoi_send_campaign");edit.hide(200),send.hide(200),onOffForm(!0),clearForm(),win.focus()}else alert("Please allow popups for this website")})),jQuery("#egoi_edit_campaign_webpush").on("click",(function(){var win=window.open("https://login.egoiapp.com/login?from=%2F%3Faction%3Dui#/messages/webpush/rss/wizard/"+jQuery("#campaign_list_id_deploy_webpush").val()+"/"+jQuery("#campaign_hash_deploy_webpush").val()+"/edit","_blank");if(win){var edit=jQuery("#egoi_edit_campaign_webpush"),send=jQuery("#egoi_send_campaign_webpush");edit.hide(200),send.hide(200),clearWebpushForm(),win.focus()}else alert("Please allow popups for this website")})),jQuery("#egoi_send_campaign").on("click",(function(){jQuery("#egoi_send_campaign_loading").show();var campaign={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_deploy_rss",campaing_hash:jQuery("#campaign_hash_deploy").val()};jQuery.post(egoi_config_ajax_object.ajax_url,campaign,(function(response){if(console.log(response),void 0!==response.error)return onOffForm(!0),clearForm(),alert(response.error),!1;jQuery("#egoi_send_campaign_loading").hide();var edit=jQuery("#egoi_edit_campaign"),send=jQuery("#egoi_send_campaign");edit.hide(200),send.hide(200),jQuery("#success_email").show(300),setTimeout((function(){jQuery("#success_email").hide(300),onOffForm(!0),clearForm()}),2e3)}))})),jQuery("#egoi_send_campaign_webpush").on("click",(function(){jQuery("#egoi_send_campaign_webpush_loading").show();var campaign={security:egoi_config_ajax_object.ajax_nonce,action:"egoi_deploy_rss_webpush",campaing_hash:jQuery("#campaign_hash_deploy_webpush").val()};jQuery.post(egoi_config_ajax_object.ajax_url,campaign,(function(response){jQuery("#egoi_send_campaign_webpush_loading").hide();var edit=jQuery("#egoi_edit_campaign_webpush"),send=jQuery("#egoi_send_campaign_webpush");if(edit.hide(200),send.hide(200),void 0!==response.error)return clearWebpushForm(),alert(response.error),!1;jQuery("#success_webpush").show(300),setTimeout((function(){jQuery("#success_webpush").hide(300),clearWebpushForm()}),2e3)}))})),jQuery(".nav-tab-addon").on("click",(function(){var tag;tag=this,jQuery(".nav-tab-addon").each((function(){jQuery(this).attr("class","nav-tab nav-tab-addon")})),jQuery(tag).attr("class","nav-tab nav-tab-addon nav-tab-active"),function(wrap){jQuery(".wrap-addon").each((function(){jQuery(this).hide()})),jQuery(wrap).show()}("#"+jQuery(".nav-tab-active").attr("id").substring(4))}));var decodeHTML=function(html){var txt=document.createElement("textarea");return txt.innerHTML=html,txt.value}})),jQuery(".js-example-basic-multiple").on("select2:select",(function(e){var option=e.params.data.element.id;if(option.indexOf("include")>=0)var option_change=option.replace("include","exclude");else option_change=option.replace("exclude","include");jQuery("#"+option_change).prop("disabled",!0),jQuery(".js-example-basic-multiple").select2("destroy"),jQuery(".js-example-basic-multiple").select2()})),jQuery(".js-example-basic-multiple").on("select2:unselect",(function(e){var option=e.params.data.element.id;if(option.indexOf("include")>=0)var option_change=option.replace("include","exclude");else option_change=option.replace("exclude","include");jQuery("#"+option_change).prop("disabled",!1),setTimeout((function(){jQuery(".js-example-basic-multiple").select2("destroy"),jQuery(".js-example-basic-multiple").select2()}))})),jQuery(".copy_url").click((function(){var feed=jQuery(this).attr("data-rss-feed");if(document.getElementById(feed).select(),document.execCommand("copy"),feed.indexOf("url")>=0){var copy_text=jQuery("#copy_text").text(),copied_text=jQuery("#copied_text").text();jQuery(".copy_url").each((function(){jQuery(this).html(copy_text).attr("style","width: 90px;")})),jQuery(this).html(copied_text).css("color","#1BDB49")}else feed.indexOf("input")>=0&&jQuery(this).html('<i class="fas fa-check"></i>').css("color","#1BDB49")}));